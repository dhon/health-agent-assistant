<html>
<head>
	<title>Search Results</title>
</head>
<body>
	<style>
		.results
		{
			border-radius: 10px;
			border: 1px solid #aaa;
			padding: 10px;
			overflow: hidden;
			background: #eee;
		}
		.restaurant
		{
			border-radius: 10px;
			border: 1px solid #aaa;
			background: #eee;
			padding: 10px;
		}
		.inspection
		{
			border-radius: 10px;
			border: 1px solid #aaa;
			background: #ccc;
			padding-top: 5px;
			padding-bottom: 5px;
		}
		.violation
		{
			border-radius: 10px;
			border: 1px solid #aaa;
			background: #bbb;
			padding-top: 5px;
			padding-bottom: 5px;
		}
	</style>
	<ul class="results">
		Search Results
		{{#each restaurant}}
		<li class="restaurant"><span>{{this.NAME}}</span>
			<ul>
				<!-- General restaurant information goes here -->
				<div>{{this.property.ADDRESS}}</div>
				<u>Inspections</u>
				{{#if this.inspection}}
				{{#each this.inspection}}
					<li class="inspection"><span>{{this.date}}</span>
					<ul>
						<!-- General inspection information goes here -->
						<u>Violations</u>
						{{#if this.violation}}
						{{#each this.violation}}
							<li class="violation"><span>{{this.CODEREFERENCE}}: {{this.DESCRIPTIONOFVIOLATIONCORRECTIONPLAN}}</span></li>
						{{/each}}
						{{else}}
							<li class ="violation"><span>No violations.</span></li>
						{{/if}}
					</ul>
					
					</li>
				{{/each}}
				{{else}}
					<li class="inspections"><span>No inspections found.</span></li>
				{{/if}}
			</ul>
			
		</li>
		{{/each}}
	</ul>
</body>

<script type="text/javascript">


// http://www.justexample.com/wp/expand-and-collapse-html-list/
var allSpan = document.getElementsByTagName('span');
for(var i = 0; i < allSpan.length; i++){
	allSpan[i].onclick=function(){
		if(this.parentNode){
			var childList = this.parentNode.getElementsByTagName('ul');
			for(var j = 0; j< childList.length;j++){
				var currentState = childList[j].style.display;
				if(currentState=="none"){
					childList[j].style.display="block";
				}else{
					childList[j].style.display="none";
				}
			}
		}
	}
}
</script>
</html>

